<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/BUILD_READY.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/BUILD_READY.md" />
              <option name="updatedContent" value="# ✅ BUILD FIX APPLIED - READY TO BUILD&#10;&#10;## Issue Fixed&#10;&#10;**Problem:** Missing import for `DebugConfig` in `ExerciseManager.kt`&#10;&#10;**Error Messages:**&#10;```&#10;e: Unresolved reference: DebugConfig (multiple locations)&#10;```&#10;&#10;**Solution Applied:**&#10;Added import statement:&#10;```kotlin&#10;import com.google.mediapipe.examples.poselandmarker.DebugConfig&#10;```&#10;&#10;---&#10;&#10;## Build Status&#10;&#10;✅ **COMPILATION ERRORS:** 0  &#10;⚠️ **WARNINGS:** Only minor code style warnings (severity 300)  &#10;✅ **ALL FILES COMPILE SUCCESSFULLY**&#10;&#10;---&#10;&#10;## Files Verified&#10;&#10;✅ `ExerciseManager.kt` - Fixed (import added)  &#10;✅ `SquatExercise.kt` - No errors  &#10;✅ `PoseProcessor.kt` - No errors  &#10;✅ `BaseExercise.kt` - No errors  &#10;✅ `PoseLandmarkerHelper.kt` - No errors  &#10;✅ `CameraFragment.kt` - No errors  &#10;&#10;---&#10;&#10;## Ready to Build&#10;&#10;```bash&#10;cd &quot;C:\Users\borhe\OneDrive\Documents\1pfe\test sport activity\mediapipe-samples-main\examples\pose_landmarker\android&quot;&#10;&#10;# Clean build&#10;gradlew.bat clean&#10;&#10;# Build APK&#10;gradlew.bat assembleDebug&#10;&#10;# Install on device&#10;gradlew.bat installDebug&#10;```&#10;&#10;---&#10;&#10;## What's Ready to Test&#10;&#10;### Game-Mode Balanced Squat Counter&#10;- ✅ Simplified state machine (READY → DOWN → BOTTOM → UP)&#10;- ✅ Hysteresis on BOTTOM phase (prevents jitter)&#10;- ✅ No blocking conditions (works sideways, at distance)&#10;- ✅ Angle validation (filters occlusion spikes)&#10;- ✅ 700ms cooldown (prevents double counting)&#10;&#10;### Test It&#10;1. Build and install app&#10;2. Stand in front of camera (front-facing)&#10;3. Perform ONE squat&#10;4. **Expected:** Counter shows &quot;Air Squat: 1&quot;&#10;5. **Log:** &quot;SQUAT ✔ Count = 1&quot;&#10;&#10;---&#10;&#10;## Next Steps&#10;&#10;1. **Build the app** (commands above)&#10;2. **Test on device** (perform squats)&#10;3. **Check logs** if needed:&#10;   ```bash&#10;   adb logcat | findstr /i &quot;SQUAT STATE COUNT&quot;&#10;   ```&#10;&#10;---&#10;&#10;## Documentation Available&#10;&#10;- **GAME_MODE_IMPLEMENTATION.md** - Full implementation details&#10;- **QUICK_TEST_GUIDE.md** - Testing procedures&#10;- **IMPLEMENTATION_SUMMARY.md** - Overview&#10;- **VISUAL_GUIDE.md** - Visual diagrams&#10;&#10;---&#10;&#10;**Status:** ✅ READY TO BUILD AND TEST  &#10;**Date:** January 30, 2026  &#10;**Build Errors:** 0  &#10;**Action Required:** Build and test on device&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/JUMPING_JACK_IMPLEMENTATION.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/JUMPING_JACK_IMPLEMENTATION.md" />
              <option name="updatedContent" value="# ✅ Jumping Jack Exercise Implementation - COMPLETE&#10;&#10;## Summary&#10;&#10;Jumping Jack exercise detection has been added to the MediaPipe Pose Android project following the exact specifications.&#10;&#10;---&#10;&#10;## Files Modified&#10;&#10;### 1. JumpingJackExercise.kt (REPLACED)&#10;**Path:** `app/src/main/java/.../exercises/jumpingjack/JumpingJackExercise.kt`&#10;&#10;**Implementation:**&#10;- Two-state machine: `CLOSED` ↔ `OPEN`&#10;- Arm angle detection: HIP → SHOULDER → WRIST (left side)&#10;- Leg spread detection: normalized ankle horizontal distance&#10;- 500ms cooldown to prevent double counting&#10;&#10;### 2. CameraFragment.kt (UPDATED)&#10;**Path:** `app/src/main/java/.../fragment/CameraFragment.kt`&#10;&#10;**Changes:**&#10;- Added `JumpingJackExercise` import&#10;- Updated `onRepCountUpdated()` to show dynamic exercise name&#10;- Updated `onExerciseChanged()` to show dynamic exercise name with toast&#10;- Added exercise switching buttons in `initExerciseSwitcher()`&#10;&#10;### 3. fragment_camera.xml (UPDATED)&#10;**Path:** `app/src/main/res/layout/fragment_camera.xml`&#10;&#10;**Changes:**&#10;- Added exercise selector buttons at top of screen&#10;- &quot;Air Squat&quot; button (green)&#10;- &quot;Jumping Jack&quot; button (blue)&#10;&#10;---&#10;&#10;## Detection Logic&#10;&#10;### State Machine&#10;```&#10;CLOSED → OPEN → CLOSED (count rep)&#10;```&#10;&#10;### Thresholds&#10;&#10;| Parameter | Value | Description |&#10;|-----------|-------|-------------|&#10;| ARM_OPEN_ANGLE | 150° | Arms overhead |&#10;| ARM_CLOSED_ANGLE | 60° | Arms at sides |&#10;| LEGS_OPEN_RATIO | 0.7 | Legs spread apart |&#10;| LEGS_CLOSED_RATIO | 0.4 | Legs together |&#10;| COOLDOWN_MS | 500ms | Prevent double counting |&#10;| MIN_TORSO_LENGTH | 0.1 | Skip if body too small |&#10;&#10;### Arm Open Condition&#10;```&#10;armAngle &gt; 150° AND wrist.y &lt; shoulder.y&#10;```&#10;&#10;### Arm Closed Condition&#10;```&#10;armAngle &lt; 60°&#10;```&#10;&#10;### Legs Open Condition&#10;```&#10;normalizedSpread = abs(leftAnkle.x - rightAnkle.x) / torsoLength&#10;normalizedSpread &gt; 0.7&#10;```&#10;&#10;### Legs Closed Condition&#10;```&#10;normalizedSpread &lt; 0.4&#10;```&#10;&#10;---&#10;&#10;## UI Changes&#10;&#10;### Exercise Selector (Top of Screen)&#10;- **Air Squat** button (green) - switches to squat detection&#10;- **Jumping Jack** button (blue) - switches to jumping jack detection&#10;&#10;### Counter Display (Center)&#10;- Shows: `[Exercise Name]: [Count]`&#10;- Example: `Jumping Jack: 5`&#10;&#10;### Reset Button (Bottom)&#10;- Resets counter for current exercise&#10;- Does NOT change exercise selection&#10;&#10;---&#10;&#10;## How It Works&#10;&#10;1. **User taps &quot;Jumping Jack&quot; button**&#10;2. `ExerciseManager.setActiveExercise(JumpingJackExercise())` is called&#10;3. Counter resets to 0&#10;4. UI shows &quot;Jumping Jack: 0&quot;&#10;5. **User performs jumping jack:**&#10;   - Arms go up + legs spread → OPEN state&#10;   - Arms go down + legs together → CLOSED state → **COUNT REP**&#10;6. Counter increments&#10;&#10;---&#10;&#10;## Architecture Preserved&#10;&#10;✅ Did NOT modify:&#10;- PoseLandmarkerHelper.kt&#10;- PoseProcessor.kt&#10;- Camera pipeline&#10;- MediaPipe pipeline&#10;- Existing Squat logic&#10;- Callback interfaces&#10;&#10;---&#10;&#10;## Build &amp; Test&#10;&#10;```bash&#10;cd &quot;C:\Users\borhe\OneDrive\Documents\1pfe\test sport activity\mediapipe-samples-main\examples\pose_landmarker\android&quot;&#10;&#10;# Build&#10;gradlew.bat assembleDebug&#10;&#10;# Install&#10;gradlew.bat installDebug&#10;```&#10;&#10;---&#10;&#10;## Test Checklist&#10;&#10;- [ ] App opens with front camera&#10;- [ ] Default exercise is &quot;Air Squat&quot;&#10;- [ ] Tap &quot;Jumping Jack&quot; switches exercise&#10;- [ ] Counter shows &quot;Jumping Jack: 0&quot;&#10;- [ ] Perform jumping jack → counter increments&#10;- [ ] No double counting (cooldown works)&#10;- [ ] Switch back to &quot;Air Squat&quot; works&#10;- [ ] Squat counter still works correctly&#10;- [ ] Reset button resets current exercise only&#10;&#10;---&#10;&#10;**Status:** ✅ IMPLEMENTATION COMPLETE  &#10;**Ready for:** Device testing&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/DebugConfig.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/DebugConfig.kt" />
              <option name="updatedContent" value="package com.google.mediapipe.examples.poselandmarker&#10;&#10;/**&#10; * Debug configuration for squat counter troubleshooting.&#10; * &#10; * USAGE:&#10; * Set DEBUG_MODE = true to enable all debug logging.&#10; * Set DEBUG_MODE = false for production (removes log overhead).&#10; * &#10; * LOG TAGS:&#10; * - PIPELINE: Camera + MediaPipe flow&#10; * - SQUAT: Squat detection logic&#10; * - STATE: Phase state transitions&#10; * - COUNT: Rep counting events&#10; * - CALLBACK: UI callback events&#10; */&#10;object DebugConfig {&#10;    &#10;    /**&#10;     * Master debug switch.&#10;     * Turn this ON when debugging squat counter issues.&#10;     * Turn this OFF for production builds.&#10;     */&#10;    const val DEBUG_MODE = true&#10;    &#10;    /**&#10;     * Log every frame (warning: very verbose!)&#10;     * Only enable for short debug sessions.&#10;     */&#10;    const val LOG_EVERY_FRAME = false&#10;    &#10;    /**&#10;     * Log validation details (facingCamera, armsForward, etc.)&#10;     */&#10;    const val LOG_VALIDATION = true&#10;    &#10;    /**&#10;     * Log angle calculations&#10;     */&#10;    const val LOG_ANGLES = true&#10;    &#10;    /**&#10;     * Log state machine transitions&#10;     */&#10;    const val LOG_STATE_TRANSITIONS = true&#10;    &#10;    /**&#10;     * Log callback execution&#10;     */&#10;    const val LOG_CALLBACKS = true&#10;    &#10;    /**&#10;     * Log pose processor validation&#10;     */&#10;    const val LOG_POSE_VALIDATION = true&#10;    &#10;    // Log tag constants&#10;    const val TAG_PIPELINE = &quot;PIPELINE&quot;&#10;    const val TAG_SQUAT = &quot;SQUAT&quot;&#10;    const val TAG_STATE = &quot;STATE&quot;&#10;    const val TAG_COUNT = &quot;COUNT&quot;&#10;    const val TAG_CALLBACK = &quot;CALLBACK&quot;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/core/PoseProcessor.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/core/PoseProcessor.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.google.mediapipe.examples.poselandmarker.core&#10;&#10;import android.util.Log&#10;import com.google.mediapipe.examples.poselandmarker.DebugConfig&#10;import com.google.mediapipe.examples.poselandmarker.models.NormalizedPose&#10;import com.google.mediapipe.examples.poselandmarker.models.PoseLandmark&#10;import com.google.mediapipe.tasks.vision.poselandmarker.PoseLandmarkerResult&#10;&#10;/**&#10; * PoseProcessor - Converts MediaPipe results into normalized pose data.&#10; *&#10; * RESPONSIBILITIES:&#10; * - Extract landmarks from PoseLandmarkerResult&#10; * - Create NormalizedPose data model&#10; * - Validate pose quality (visibility, completeness)&#10; * - Abstract MediaPipe internals from exercise logic&#10; *&#10; * ARCHITECTURE:&#10; * This is the BRIDGE between MediaPipe SDK and your exercise engine.&#10; * Exercise logic should NEVER directly access MediaPipe types.&#10; *&#10; * FUTURE CROSS-PLATFORM:&#10; * - Flutter: Custom pose data from ML Kit or TensorFlow Lite&#10; * - Unity: Custom pose data from Barracuda or native plugins&#10; * - All platforms convert to NormalizedPose format&#10; */&#10;object PoseProcessor {&#10;&#10;    private const val TAG = &quot;PoseProcessor&quot;&#10;    private var lastLogTime = 0L&#10;&#10;    /**&#10;     * Convert MediaPipe PoseLandmarkerResult to NormalizedPose.&#10;     *&#10;     * @param result MediaPipe detection result&#10;     * @return NormalizedPose or null if invalid&#10;     */&#10;    fun processResult(result: PoseLandmarkerResult): NormalizedPose? {&#10;        if (result.landmarks().isEmpty()) {&#10;            return null&#10;        }&#10;&#10;        val landmarks = result.landmarks()[0]&#10;&#10;        // Build landmark map - include ALL landmarks regardless of visibility&#10;        // Let the exercise logic decide what's needed&#10;        val landmarkMap = mutableMapOf&lt;PoseLandmark, com.google.mediapipe.tasks.components.containers.NormalizedLandmark&gt;()&#10;&#10;        PoseLandmark.values().forEach { poseLandmark -&gt;&#10;            if (poseLandmark.index &lt; landmarks.size) {&#10;                landmarkMap[poseLandmark] = landmarks[poseLandmark.index]&#10;            }&#10;        }&#10;&#10;        // NO VALIDATION - just return the pose&#10;        // SquatExercise will handle missing landmarks gracefully&#10;        return NormalizedPose(&#10;            landmarks = landmarkMap,&#10;            timestamp = result.timestampMs()&#10;        )&#10;    }&#10;&#10;    /**&#10;     * Check if pose has all required landmarks for exercise detection.&#10;     *&#10;     * REQUIRED LANDMARKS (STRICT - must be visible):&#10;     * - Shoulders (LEFT, RIGHT)&#10;     * - Hips (LEFT, RIGHT)&#10;     * - Knees (LEFT, RIGHT)&#10;     * - Ankles (LEFT, RIGHT)&#10;     *&#10;     * OPTIONAL LANDMARKS (nice to have but not required):&#10;     * - Wrists (LEFT, RIGHT) - may not always be visible&#10;     */&#10;    private fun isPoseComplete(landmarks: Map&lt;PoseLandmark, com.google.mediapipe.tasks.components.containers.NormalizedLandmark&gt;): Boolean {&#10;        // Core body landmarks - MUST be visible&#10;        val requiredLandmarks = listOf(&#10;            PoseLandmark.LEFT_SHOULDER,&#10;            PoseLandmark.RIGHT_SHOULDER,&#10;            PoseLandmark.LEFT_HIP,&#10;            PoseLandmark.RIGHT_HIP,&#10;            PoseLandmark.LEFT_KNEE,&#10;            PoseLandmark.RIGHT_KNEE,&#10;            PoseLandmark.LEFT_ANKLE,&#10;            PoseLandmark.RIGHT_ANKLE&#10;        )&#10;&#10;        // Check all required landmarks exist and are visible&#10;        // Lower visibility threshold from 0.5 to 0.3 for more lenient detection&#10;        return requiredLandmarks.all { landmark -&gt;&#10;            val lm = landmarks[landmark]&#10;            lm != null &amp;&amp; lm.visibility().orElse(0f) &gt; 0.3f&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Get pose quality score (0.0 - 1.0).&#10;     * Based on average visibility of key landmarks.&#10;     *&#10;     * Used for UI feedback:&#10;     * - &lt; 0.5: &quot;Move closer to camera&quot;&#10;     * - 0.5-0.7: &quot;Pose partially visible&quot;&#10;     * - &gt; 0.7: &quot;Good pose quality&quot;&#10;     */&#10;    fun getPoseQuality(pose: NormalizedPose): Float {&#10;        val keyLandmarks = listOf(&#10;            PoseLandmark.LEFT_SHOULDER,&#10;            PoseLandmark.RIGHT_SHOULDER,&#10;            PoseLandmark.LEFT_HIP,&#10;            PoseLandmark.RIGHT_HIP,&#10;            PoseLandmark.LEFT_KNEE,&#10;            PoseLandmark.RIGHT_KNEE&#10;        )&#10;&#10;        val visibilities = keyLandmarks.mapNotNull { landmark -&gt;&#10;            pose.getLandmark(landmark)?.visibility()?.orElse(0f)&#10;        }&#10;&#10;        return if (visibilities.isEmpty()) {&#10;            0f&#10;        } else {&#10;            visibilities.average().toFloat()&#10;        }&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/exercises/base/BaseExercise.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/exercises/base/BaseExercise.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.google.mediapipe.examples.poselandmarker.exercises.base&#10;&#10;import com.google.mediapipe.examples.poselandmarker.DebugConfig&#10;import com.google.mediapipe.examples.poselandmarker.models.NormalizedPose&#10;&#10;/**&#10; * Base interface for all exercise detection modules.&#10; *&#10; * ARCHITECTURE:&#10; * - Each exercise (Squat, JumpingJack, Jump, etc.) implements this interface&#10; * - ExerciseManager routes pose frames to the active exercise&#10; * - UI layer receives callbacks via ExerciseListener&#10; *&#10; * FUTURE CROSS-PLATFORM INTEGRATION:&#10; * - Flutter: Flutter app will communicate via platform channels&#10; * - Unity: Unity plugin will receive exercise events via JNI&#10; * - This interface remains the same across platforms&#10; */&#10;abstract class BaseExercise {&#10;&#10;    /**&#10;     * Exercise state for UI feedback and game logic.&#10;     */&#10;    enum class ExerciseState {&#10;        IDLE,           // No valid pose detected&#10;        READY,          // User in starting position&#10;        IN_PROGRESS,    // Mid-exercise (e.g., descending in squat)&#10;        COMPLETED       // Rep completed&#10;    }&#10;&#10;    /**&#10;     * Listener for exercise events (callbacks to UI layer).&#10;     */&#10;    interface ExerciseListener {&#10;        /**&#10;         * Called when rep count changes.&#10;         * @param count Total rep count&#10;         * @param exerciseName Name of the exercise&#10;         */&#10;        fun onRepCountUpdated(count: Int, exerciseName: String)&#10;&#10;        /**&#10;         * Called when exercise state changes.&#10;         * @param state New state&#10;         * @param details Optional state details (e.g., &quot;Squat depth: 90°&quot;)&#10;         */&#10;        fun onStateChanged(state: ExerciseState, details: String = &quot;&quot;)&#10;&#10;        /**&#10;         * Called when exercise validation fails.&#10;         * @param reason Why the rep was invalid (e.g., &quot;Arms not horizontal&quot;)&#10;         */&#10;        fun onValidationError(reason: String)&#10;&#10;        /**&#10;         * Called when exercise set is completed.&#10;         * @param totalReps Total reps completed&#10;         * @param duration Total duration in seconds&#10;         */&#10;        fun onExerciseComplete(totalReps: Int, duration: Long)&#10;    }&#10;&#10;    // ========== ABSTRACT METHODS (Must be implemented by each exercise) ==========&#10;&#10;    /**&#10;     * Process a pose frame and update exercise state.&#10;     * This is the main detection loop called by ExerciseManager.&#10;     *&#10;     * @param pose Normalized pose data&#10;     */&#10;    abstract fun processPose(pose: NormalizedPose)&#10;&#10;    /**&#10;     * Reset exercise state and rep count.&#10;     * Called when:&#10;     * - User switches exercises&#10;     * - User starts a new session&#10;     * - UI requests reset&#10;     */&#10;    abstract fun reset()&#10;&#10;    /**&#10;     * Get exercise name (e.g., &quot;Squat&quot;, &quot;Jumping Jack&quot;).&#10;     */&#10;    abstract fun getName(): String&#10;&#10;    /**&#10;     * Get exercise description for UI.&#10;     */&#10;    abstract fun getDescription(): String&#10;&#10;    /**&#10;     * Check if pose is valid for this exercise.&#10;     * Used for pre-start validation.&#10;     *&#10;     * @param pose Normalized pose data&#10;     * @return Pair&lt;Boolean, String&gt; (isValid, reason)&#10;     */&#10;    abstract fun isPoseValid(pose: NormalizedPose): Pair&lt;Boolean, String&gt;&#10;&#10;    // ========== SHARED STATE (Available to all exercises) ==========&#10;&#10;    // Use backing field to avoid conflicts&#10;    private var _repCount: Int = 0&#10;    private var _currentState: ExerciseState = ExerciseState.IDLE&#10;&#10;    /**&#10;     * Current rep count - readable by all, writable by subclasses only&#10;     */&#10;    var repCount: Int&#10;        get() = _repCount&#10;        protected set(value) { _repCount = value }&#10;&#10;    /**&#10;     * Current exercise state - readable by all, writable by subclasses only&#10;     */&#10;    var currentState: ExerciseState&#10;        get() = _currentState&#10;        protected set(value) { _currentState = value }&#10;&#10;    private var listener: ExerciseListener? = null&#10;    protected var startTime: Long = 0L&#10;&#10;    /**&#10;     * Set listener for exercise events.&#10;     */&#10;    fun setListener(listener: ExerciseListener?) {&#10;        this.listener = listener&#10;    }&#10;&#10;    /**&#10;     * Notify listener of rep count update.&#10;     */&#10;    protected fun notifyRepCountUpdated() {&#10;        // DEBUG: Log callback firing&#10;        if (DebugConfig.DEBUG_MODE &amp;&amp; DebugConfig.LOG_CALLBACKS) {&#10;            android.util.Log.d(DebugConfig.TAG_CALLBACK, &quot;notifyRepCountUpdated() called | &quot; +&#10;                &quot;count=$repCount | &quot; +&#10;                &quot;exercise=${getName()} | &quot; +&#10;                &quot;listener=${if (listener != null) &quot;SET&quot; else &quot;NULL&quot;}&quot;)&#10;        }&#10;        listener?.onRepCountUpdated(repCount, getName())&#10;    }&#10;&#10;    /**&#10;     * Notify listener of state change.&#10;     */&#10;    protected fun notifyStateChanged(details: String = &quot;&quot;) {&#10;        // DEBUG: Log state change callback&#10;        if (DebugConfig.DEBUG_MODE &amp;&amp; DebugConfig.LOG_CALLBACKS) {&#10;            android.util.Log.d(DebugConfig.TAG_CALLBACK, &quot;notifyStateChanged() | &quot; +&#10;                &quot;state=$currentState | &quot; +&#10;                &quot;details='$details'&quot;)&#10;        }&#10;        listener?.onStateChanged(currentState, details)&#10;    }&#10;&#10;    /**&#10;     * Notify listener of validation error.&#10;     */&#10;    protected fun notifyValidationError(reason: String) {&#10;        listener?.onValidationError(reason)&#10;    }&#10;&#10;    /**&#10;     * Notify listener of exercise completion.&#10;     */&#10;    protected fun notifyExerciseComplete() {&#10;        val duration = (System.currentTimeMillis() - startTime) / 1000&#10;        listener?.onExerciseComplete(repCount, duration)&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/models/NormalizedPose.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/google/mediapipe/examples/poselandmarker/models/NormalizedPose.kt" />
              <option name="updatedContent" value="package com.google.mediapipe.examples.poselandmarker.models&#10;&#10;import com.google.mediapipe.tasks.components.containers.NormalizedLandmark&#10;&#10;/**&#10; * Normalized pose data structure for exercise detection.&#10; * All coordinates are normalized (0.0 to 1.0) for distance independence.&#10; *&#10; * This model provides clean access to pose landmarks without MediaPipe dependencies&#10; * in exercise logic. Future integration with Flutter/Unity will use this structure.&#10; */&#10;data class NormalizedPose(&#10;    val landmarks: Map&lt;PoseLandmark, NormalizedLandmark&gt;,&#10;    val timestamp: Long&#10;) {&#10;    &#10;    /**&#10;     * Calculate angle between three points (in degrees).&#10;     * Used for joint angle calculations like knee, elbow, etc.&#10;     * &#10;     * @param pointA First point (e.g., Hip)&#10;     * @param vertex Middle point/vertex (e.g., Knee)&#10;     * @param pointC Third point (e.g., Ankle)&#10;     * @return Angle in degrees (0-180)&#10;     */&#10;    fun calculateAngle(&#10;        pointA: PoseLandmark,&#10;        vertex: PoseLandmark,&#10;        pointC: PoseLandmark&#10;    ): Float {&#10;        val a = landmarks[pointA] ?: return 0f&#10;        val b = landmarks[vertex] ?: return 0f&#10;        val c = landmarks[pointC] ?: return 0f&#10;        &#10;        val radians = Math.atan2((c.y() - b.y()).toDouble(), (c.x() - b.x()).toDouble()) -&#10;                Math.atan2((a.y() - b.y()).toDouble(), (a.x() - b.x()).toDouble())&#10;        var angle = Math.abs(radians * 180.0 / Math.PI)&#10;        if (angle &gt; 180.0) {&#10;            angle = 360.0 - angle&#10;        }&#10;        return angle.toFloat()&#10;    }&#10;    &#10;    /**&#10;     * Calculate Euclidean distance between two landmarks.&#10;     * Used for body measurements like torso length, shoulder width, etc.&#10;     */&#10;    fun calculateDistance(point1: PoseLandmark, point2: PoseLandmark): Float {&#10;        val p1 = landmarks[point1] ?: return 0f&#10;        val p2 = landmarks[point2] ?: return 0f&#10;        &#10;        return Math.sqrt(&#10;            Math.pow((p1.x() - p2.x()).toDouble(), 2.0) +&#10;            Math.pow((p1.y() - p2.y()).toDouble(), 2.0)&#10;        ).toFloat()&#10;    }&#10;    &#10;    /**&#10;     * Get landmark by enum (safe access).&#10;     */&#10;    fun getLandmark(landmark: PoseLandmark): NormalizedLandmark? {&#10;        return landmarks[landmark]&#10;    }&#10;}&#10;&#10;/**&#10; * MediaPipe Pose 33-point landmark model.&#10; * Enum provides type-safe access to pose landmarks.&#10; */&#10;enum class PoseLandmark(val index: Int) {&#10;    NOSE(0),&#10;    LEFT_EYE_INNER(1),&#10;    LEFT_EYE(2),&#10;    LEFT_EYE_OUTER(3),&#10;    RIGHT_EYE_INNER(4),&#10;    RIGHT_EYE(5),&#10;    RIGHT_EYE_OUTER(6),&#10;    LEFT_EAR(7),&#10;    RIGHT_EAR(8),&#10;    MOUTH_LEFT(9),&#10;    MOUTH_RIGHT(10),&#10;    LEFT_SHOULDER(11),&#10;    RIGHT_SHOULDER(12),&#10;    LEFT_ELBOW(13),&#10;    RIGHT_ELBOW(14),&#10;    LEFT_WRIST(15),&#10;    RIGHT_WRIST(16),&#10;    LEFT_PINKY(17),&#10;    RIGHT_PINKY(18),&#10;    LEFT_INDEX(19),&#10;    RIGHT_INDEX(20),&#10;    LEFT_THUMB(21),&#10;    RIGHT_THUMB(22),&#10;    LEFT_HIP(23),&#10;    RIGHT_HIP(24),&#10;    LEFT_KNEE(25),&#10;    RIGHT_KNEE(26),&#10;    LEFT_ANKLE(27),&#10;    RIGHT_ANKLE(28),&#10;    LEFT_HEEL(29),&#10;    RIGHT_HEEL(30),&#10;    LEFT_FOOT_INDEX(31),&#10;    RIGHT_FOOT_INDEX(32)&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>